<% if !@salfile.errors.empty? %>
   <div class = "alert alert-error">

      <ul>
         <% @salfile.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
         <% end %>
      </ul>

   </div>
<% end %>

<div class = "well">
   <%= form_for @salfile, html: { multipart: true } do |f| %>
      <%= f.label :name %>
      <%= f.text_field :name %><br><br>
      <%= f.label :attachment %>:
      <%= f.file_field :attachment, id: "asd" %><br>
      <%= f.submit "Upload", class: "btn btn-primary" %>
   <% end %>

   <script>
    
     File.prototype.convertToBase64 = function(callback){
            var reader = new FileReader();
            reader.onload = function(e) {
                 callback(e.target.result)
            };
            reader.onerror = function(e) {
                 callback(null);
            };        
            reader.readAsDataURL(this);
    };

    $("#asd").on('change',function(){
      var selectedFile = this.files[0];
      selectedFile.convertToBase64(function(base64){
           alert(base64);
      }) 
    });
   </script>

</div>